<?php

namespace Database\Factories;

use App\Models\Faculty;
use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Cache;

class StudentProfileFactory extends Factory
{
    public function definition(): array
    {
        $specializations = [
            'Программная инженерия',
            'Информационные системы',
            'Логистика',
            'Финансовый менеджмент',
            'Проектирование зданий',
            'Автоматизированные системы управления',
        ];

        // Get faculty IDs to randomly assign
        $facultyIds = Cache::remember('faculty_ids', 3600, function () {
            return Faculty::pluck('id')->toArray();
        });

        return [
            'user_id' => User::factory(),
            'faculty_id' => ! empty($facultyIds) ? fake()->randomElement($facultyIds) : null,
            'group' => fake()->numerify('ИТ-##'),
            'course' => fake()->boolean(80) ? fake()->numberBetween(1, 6) : null,
            'specialization' => fake()->randomElement($specializations),
            'bio' => fake()->optional(0.6)->randomElement([
                'Увлекаюсь программированием и разработкой. Активно участвую в проектах и хакатонах.',
                'Интересуюсь логистикой и управлением цепями поставок. Изучаю современные подходы к оптимизации.',
                'Специализируюсь на финансовом анализе и инвестициях. Участвую в студенческих конференциях.',
                'Работаю над проектами в области информационных систем. Изучаю новые технологии и методологии.',
                'Увлекаюсь проектированием и архитектурой. Участвую в конкурсах и выставках.',
                'Интересуюсь автоматизацией и робототехникой. Разрабатываю собственные проекты.',
                'Стремлюсь применять данные для принятия управленческих решений. Углублённо изучаю BI и аналитические инструменты.',
                'Мой фокус — на цифровой трансформации бизнеса. Исследую кейсы внедрения ERP и CRM в средних компаниях.',
                'Пишу на Python и SQL. Больше всего вдохновляют задачи, где код решает реальные бизнес-проблемы.',
                'Изучаю устойчивое развитие и ESG-подходы в корпоративной стратегии. Верю, что бизнес может быть ответственным.',
                'Разрабатываю full-stack приложения в учебных и внеучебных проектах. Особенно интересует UX/UI-взаимодействие.',
                'Исследую поведенческие аспекты в финансах: как люди принимают решения о сбережениях и инвестициях.',
                'Работаю с Tableau и Power BI. Цель — превращать сырые данные в понятные визуальные истории.',
                'Меня привлекает пересечение технологий и управления. Сейчас изучаю agile-методологии и product-менеджмент.',
                'Занимаюсь веб-разработкой, особенно бэкендом. Люблю чистую архитектуру и масштабируемые решения.',
                'Интересуюсь управлением проектами в IT. Прошёл сертификацию по основам Scrum и ищу практику.',
                'Активно слежу за трендами в финтехе: open banking, цифровые валюты, embedded finance.',
                'Участвую в студенческом научном обществе по экономике. Тема моих исследований — региональное развитие.',
                'Пишу небольшие ML-модели для анализа потребительского поведения. Пока в учебных целях, но планирую дальше.',
                'Увлекаюсь системным анализом и моделированием бизнес-процессов. Люблю упрощать сложное.',
                'Развиваюсь в области кибербезопасности. Изучаю основы защиты данных и аудита информационных систем.',
                'Мне близка идея «умных» городов. Интересуюсь IoT, сенсорными сетями и городской аналитикой.',
                'Изучаю международные рынки и валютные стратегии. Слежу за макроэкономической повесткой ежедневно.',
                'Создаю образовательные приложения для студентов. Считаю, что технологии должны помогать учиться.',
                'Работаю над кейсами по управлению запасами и прогнозированию спроса. Люблю точные расчёты.',
                'Мой интерес — в кросс-функциональных командах: где инженеры, аналитики и маркетологи решают одну задачу.',
                'Изучаю UX-исследования и юзабилити-тестирование. Важно не просто сделать красиво, а удобно.',
                'Пишу на Java и Spring Boot. Ценю надёжность, тестируемость и читаемость кода.',
                'Интересуюсь корпоративными финансами: оценкой компаний, структурой капитала и M&A.',
                'Разрабатываю Telegram-ботов и автоматизации для малого бизнеса. Люблю практичные решения.',
                'Участвую в разработке ERP-модулей в рамках студенческого IT-проекта. Работаю с базами данных и API.',
                'Изучаю lean-подходы в производстве и логистике. Ценю минимализм и устранение потерь.',
                'Меня вдохновляют стартапы. Анализирую их бизнес-модели и способы масштабирования.',
                'Работаю с Excel на продвинутом уровне: Power Query, макросы, динамические отчёты.',
                'Интересуюсь управлением человеческими ресурсами в digital-среде. Изучаю HR tech и onboarding-стратегии.',
                'Пишу техническую документацию и спецификации. Важно, чтобы даже сложные решения были понятны другим.',
                'Изучаю блокчейн-технологии и их применение в финансах и логистике. Пока в теории — скоро в практике.',
                'Увлекаюсь data storytelling: как из сухих цифр сделать убедительную презентацию для топ-менеджмента.',
                'Разрабатываю мобильные приложения под Android. Цель — сделать продукт, которым пользуются ежедневно.',
                'Интересуюсь риск-менеджментом в банковской сфере. Изучаю методы оценки кредитных и рыночных рисков.',
                'Участвую в кейс-чемпионатах по стратегическому управлению. Люблю работать на пересечении данных и стратегии.',
                'Изучаю customer journey и touchpoint-аналитику. Хочу понимать, как клиент проходит путь до покупки.',
                'Пишу скрипты для автоматизации рутинных задач — от обработки Excel до парсинга сайтов.',
                'Мне интересна роль ИИ в бизнесе: от чат-ботов до прогнозных моделей спроса.',
                'Работаю над проектом по цифровизации документооборота. Ценю экологичность и эффективность.',
                'Изучаю принципы бережливого стартапа (Lean Startup). Тестирую гипотезы минимумом ресурсов.',
                'Участвую в развитии open-source проектов. Верю в силу сообществ и совместного кода.',
                'Интересуюсь pricing-стратегиями и ценовой эластичностью. Как найти баланс между прибылью и спросом?',
                'Развиваюсь в направлении DevOps: CI/CD, контейнеризация, мониторинг. Системность — мой приоритет.',
                'Изучаю юридические аспекты IT: лицензирование ПО, защита персональных данных, регулирование ИИ.',
                'Меня привлекает работа с API и интеграциями между системами. Люблю, когда всё «стыкуется».',
                'Увлекаюсь визуализацией данных в реальном времени. Построение дашбордов — мой способ видеть картину целиком.',
                'Интересуюсь digital-трансформацией в ритейле: от онлайн-касс до персонализированных рекомендаций.',
                'Изучаю поведенческую экономику и её применение в маркетинге. Люди — не всегда рациональны, и это интересно.',
                'Работаю над созданием MVP для студенческого стартапа. Учусь быстро проверять идеи на рынке.',
                'Пишу технические ТЗ и требования к ПО. Считаю, что чёткое ТЗ — половина успеха проекта.',
            ]),
            'phone' => fake()->optional(0.7)->regexify('\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}'),
            'total_points' => fake()->numberBetween(0, 5000),
        ];
    }
}
