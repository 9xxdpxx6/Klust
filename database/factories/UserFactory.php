<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Str;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\User>
 */
class UserFactory extends Factory
{
    /**
     * The current password being used by the factory.
     */
    protected static ?string $password;

    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        // Определяем пол (50/50)
        $isMale = fake()->boolean(50);
        
        // Мужские имена
        $maleFirstNames = [
            'Иван', 'Александр', 'Дмитрий', 'Максим', 'Артём', 'Михаил', 'Андрей', 'Сергей', 'Алексей', 'Владимир',
            'Никита', 'Роман', 'Даниил', 'Илья', 'Кирилл', 'Егор', 'Матвей', 'Тимофей', 'Арсений', 'Лев',
            'Павел', 'Константин', 'Евгений', 'Василий', 'Григорий', 'Олег', 'Юрий', 'Борис', 'Виктор', 'Станислав',
            'Фёдор', 'Ярослав', 'Марк', 'Семён', 'Глеб', 'Давид', 'Владислав', 'Игорь', 'Руслан', 'Артёмий',
            'Захар', 'Прохор', 'Савва', 'Эдуард', 'Антон', 'Яков', 'Виталий', 'Святослав', 'Богдан', 'Аркадий'
        ];
        
        $femaleFirstNames = [
            'Анна', 'Мария', 'Елена', 'Ольга', 'Татьяна', 'Наталья', 'Ирина', 'Светлана', 'Екатерина', 'Юлия',
            'Анастасия', 'Дарья', 'Виктория', 'Полина', 'София', 'Александра', 'Валерия', 'Ксения', 'Вероника', 'Алиса',
            'Елизавета', 'Арина', 'Диана', 'Маргарита', 'Милана', 'Ангелина', 'Василиса', 'Ульяна', 'Амина', 'Ева',
            'Кира', 'Мирослава', 'Людмила', 'Алёна', 'Надежда', 'Злата', 'Вера', 'Таисия', 'Эмилия', 'Алина',
            'Марина', 'Кристина', 'Софья', 'Любовь', 'Регина', 'Камилла', 'Эвелина', 'Дарина', 'Аделина', 'Мелания'
        ];
        
        $maleLastNames = [
            'Иванов', 'Петров', 'Смирнов', 'Кузнецов', 'Попов', 'Соколов', 'Лебедев', 'Козлов', 'Новиков', 'Морозов',
            'Волков', 'Соловьёв', 'Васильев', 'Зайцев', 'Павлов', 'Семёнов', 'Голубев', 'Виноградов', 'Богданов', 'Воробьёв',
            'Фёдоров', 'Михайлов', 'Беляев', 'Тарасов', 'Белов', 'Комаров', 'Орлов', 'Киселёв', 'Макаров', 'Андреев',
            'Ковалёв', 'Ильин', 'Гусев', 'Титов', 'Кузьмин', 'Кудрявцев', 'Баранов', 'Куликов', 'Алексеев', 'Степанов',
            'Яковлев', 'Сорокин', 'Сергеев', 'Романов', 'Захаров', 'Борисов', 'Королёв', 'Герасимов', 'Пономарёв', 'Григорьев'
        ];
        
        $femaleLastNames = [
            'Иванова', 'Петрова', 'Смирнова', 'Кузнецова', 'Попова', 'Соколова', 'Лебедева', 'Козлова', 'Новикова', 'Морозова',
            'Волкова', 'Соловьёва', 'Васильева', 'Зайцева', 'Павлова', 'Семёнова', 'Голубева', 'Виноградова', 'Богданова', 'Воробьёва',
            'Фёдорова', 'Михайлова', 'Беляева', 'Тарасова', 'Белова', 'Комарова', 'Орлова', 'Киселёва', 'Макарова', 'Андреева',
            'Ковалёва', 'Ильина', 'Гусева', 'Титова', 'Кузьмина', 'Кудрявцева', 'Баранова', 'Куликова', 'Алексеева', 'Степанова',
            'Яковлева', 'Сорокина', 'Сергеева', 'Романова', 'Захарова', 'Борисова', 'Королёва', 'Герасимова', 'Пономарёва', 'Григорьева'
        ];
        
        $maleMiddleNames = [
            'Иванович', 'Александрович', 'Дмитриевич', 'Максимович', 'Артёмович', 'Михайлович', 'Андреевич', 'Сергеевич', 'Алексеевич', 'Владимирович',
            'Никитич', 'Романович', 'Даниилович', 'Ильич', 'Кириллович', 'Егорович', 'Матвеевич', 'Тимофеевич', 'Арсеньевич', 'Львович',
            'Павлович', 'Константинович', 'Евгеньевич', 'Васильевич', 'Григорьевич', 'Олегович', 'Юрьевич', 'Борисович', 'Викторович', 'Станиславович',
            'Фёдорович', 'Ярославович', 'Маркович', 'Семёнович', 'Глебович', 'Давидович', 'Владиславович', 'Игоревич', 'Русланович', 'Артёмьевич',
            'Захарович', 'Прохорович', 'Саввич', 'Эдуардович', 'Антонович', 'Яковлевич', 'Витальевич', 'Святославович', 'Богданович', 'Аркадьевич'
        ];
        
        $femaleMiddleNames = [
            'Ивановна', 'Александровна', 'Дмитриевна', 'Максимовна', 'Артёмовна', 'Михайловна', 'Андреевна', 'Сергеевна', 'Алексеевна', 'Владимировна',
            'Никитична', 'Романовна', 'Данииловна', 'Ильинична', 'Кирилловна', 'Егоровна', 'Матвеевна', 'Тимофеевна', 'Арсеньевна', 'Львовна',
            'Павловна', 'Константиновна', 'Евгеньевна', 'Васильевна', 'Григорьевна', 'Олеговна', 'Юрьевна', 'Борисовна', 'Викторовна', 'Станиславовна',
            'Фёдоровна', 'Ярославовна', 'Марковна', 'Семёновна', 'Глебовна', 'Давидовна', 'Владиславовна', 'Игоревна', 'Руслановна', 'Артёмьевна',
            'Захаровна', 'Прохоровна', 'Саввична', 'Эдуардовна', 'Антоновна', 'Яковлевна', 'Витальевна', 'Святославовна', 'Богдановна', 'Аркадьевна'
        ];
        
        // Выбираем имя, фамилию и отчество в зависимости от пола
        if ($isMale) {
            $firstName = fake()->randomElement($maleFirstNames);
            $lastName = fake()->randomElement($maleLastNames);
            $middleName = fake()->randomElement($maleMiddleNames);
        } else {
            $firstName = fake()->randomElement($femaleFirstNames);
            $lastName = fake()->randomElement($femaleLastNames);
            $middleName = fake()->randomElement($femaleMiddleNames);
        }
        
        $fullName = "$lastName $firstName $middleName";

        return [
            'kubgtu_id' => fake()->boolean(30) ? fake()->unique()->numerify('STU#######') : null,
            'name' => $fullName,
            'email' => fake()->unique()->safeEmail(),
            'email_verified_at' => now(),
            'password' => static::$password ??= Hash::make('password'),
            'avatar' => fake()->boolean(70) ? fake()->imageUrl(200, 200, 'people') : null,
            'remember_token' => Str::random(10),
        ];
    }

    public function student(): static
    {
        return $this->state(fn (array $attributes) => []);
    }

    public function partner(): static
    {
        return $this->state(fn (array $attributes) => [
            'kubgtu_id' => null,
        ]);
    }

    public function teacher(): static
    {
        return $this->state(fn (array $attributes) => []);
    }

    /**
     * Indicate that the model's email address should be unverified.
     */
    public function unverified(): static
    {
        return $this->state(fn (array $attributes) => [
            'email_verified_at' => null,
        ]);
    }
}
